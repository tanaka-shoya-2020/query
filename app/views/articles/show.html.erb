<div class="col-xs-8">
  <h3>タイトル:
      <%= @article.title %><br>
  </h3>
  <h3>
    投稿者:
      <%= "#{@article.user.nickname}さん" %>
  </h3>
  <%= markdown(@article.text).html_safe %>
  <%# ユーザーが投稿したユーザーかそうでないかで条件分岐 %>
  <% if user_signed_in? && current_user.id == @article.user.id %>
    <%= link_to "編集する", edit_article_path(@article.id), class: "btn btn-primary" %>
    <%= link_to "削除する", article_path(@article.id), method: :delete, class: "btn btn-danger" %>
  <% end%>
  <%# 条件分岐終わり %>
  <%=  form_with(model: [@article,@comment], local: true) do |f| %>
    <div class="form-group">
      <%= f.text_area :comment, placeholder: "コメントする", rows: "5",autofocus: true, class: "form-control"%>
    </div>

    <div class="actions"> 
      <%= f.submit "コメントを投稿する", class: "btn btn-primary btn-lg btn-block" %>
    </div>
  <% end %>
</div>

<div class="col-xs-4">
<% if @comments %>
  <h4>コメント一覧</h4>
  <% @comments.each do |comment| %>
    <p> 
      <%= "投稿者: #{comment.user.nickname}"%><br>
      <%= comment.comment %><br />
      <%= link_to "編集する", edit_article_comment_path(@article,comment) %>,
      <%= link_to "削除する", article_comment_path(@article,comment), method: :delete, data: { confirm: "本当に削除しますか" } %>
    </p>
  <% end%>
<% end %>
</div>

<div>
  <%= link_to "投稿一覧画面に戻る", articles_path %>
</div>

